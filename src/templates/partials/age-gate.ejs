<% if (config.legal.ageVerification) { %>
<div id="age-gate" class="fixed inset-0 z-50 bg-bg-primary flex items-center justify-center">
  <div class="bg-bg-secondary rounded-2xl p-8 mx-4 max-w-md w-full text-center shadow-2xl">
    <!-- Icon -->
    <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-primary/10 flex items-center justify-center">
      <svg class="w-10 h-10 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
      </svg>
    </div>

    <!-- Title -->
    <h2 class="text-2xl font-bold text-white mb-4">Altersverifikation</h2>

    <!-- Text -->
    <p class="text-text-secondary mb-6 leading-relaxed">
      Diese Website enthält Inhalte, die nur für Erwachsene bestimmt sind.
      Du musst mindestens <strong class="text-white"><%= config.legal.minimumAge %> Jahre</strong> alt sein, um fortzufahren.
    </p>

    <!-- Buttons -->
    <div class="space-y-3">
      <button id="age-confirm"
              class="w-full px-6 py-3 bg-primary hover:bg-primary-hover text-white font-semibold rounded-xl transition-all duration-300 shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30">
        Ich bin <%= config.legal.minimumAge %>+ Jahre alt
      </button>
      <a href="https://google.com" rel="nofollow"
         class="block w-full px-6 py-3 bg-bg-card hover:bg-zinc-700 text-white font-semibold rounded-xl border border-zinc-700 transition-colors">
        Ich bin unter <%= config.legal.minimumAge %>
      </a>
    </div>

    <!-- Legal Note -->
    <p class="text-xs text-text-secondary mt-6">
      Mit dem Klick auf "Ich bin <%= config.legal.minimumAge %>+ Jahre alt" bestätigst du, dass du volljährig bist und die Inhalte für Erwachsene sehen möchtest.
    </p>
  </div>
</div>

<script>
  (function() {
    const ageGate = document.getElementById('age-gate');
    const confirmBtn = document.getElementById('age-confirm');
    const storageKey = 'age_verified_<%= config.model.id %>';

    if (localStorage.getItem(storageKey) === 'true') {
      ageGate.style.display = 'none';
      document.body.style.overflow = '';
    } else {
      document.body.style.overflow = 'hidden';
    }

    confirmBtn.addEventListener('click', function() {
      localStorage.setItem(storageKey, 'true');
      ageGate.style.opacity = '0';
      ageGate.style.transition = 'opacity 0.3s ease';
      setTimeout(function() {
        ageGate.style.display = 'none';
        document.body.style.overflow = '';
      }, 300);
    });
  })();
</script>
<% } %>
